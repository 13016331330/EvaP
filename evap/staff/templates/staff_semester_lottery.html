{% extends "staff_semester_base.html" %}

{% block breadcrumb %}
    {{ block.super }}
    <li class="breadcrumb-item">{% trans "Lottery" %}</li>
{% endblock %}

{% block content %}
    {{ block.super }}
    {% if not form.is_valid %}
    <form method="POST" class="form-horizontal">
        {% csrf_token %}
        <fieldset>
        <legend>{% trans "Lottery" %}</legend>
        {% include "bootstrap_form.html" with form=form %}
        </fieldset>
        <div class="card card-submit-area text-center mb-3">
            <div class="card-body">
                <button type="submit" class="btn btn-primary">{% trans "Perform Lottery" %}</button>
            </div>
        </div>
    </form>
    {% else %}
    <p>
        {% trans "The lottery was performed and the winners are:" %}
    </p>
    <ul>
        {% for user in winners %}
            <li>
                {{ user.full_name }}
                {% if user.email %}
                    (<a href="mailto:{{ user.email }}">{{ user.email }}</a>)
                {% endif %}
            </li>
        {% empty %}
            <li>None</li>
        {% endfor %}
    </ul>
    <p>{{ eligible|length }} {% trans 'users were eligible for the lottery.' %}</p>
    {% endif %}
{% endblock %}
